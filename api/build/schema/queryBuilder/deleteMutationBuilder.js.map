{"version":3,"sources":["../../../src/schema/queryBuilder/deleteMutationBuilder.js"],"names":["deleteMutationBuilder","params","ctx","input","table","db","query","delete","where","Object","keys","forEach","whereKey","key","value"],"mappings":";;AAEA;;AAEA,6D;;;;;;;;AAQO,MAAMA,qBAAqB,GAAIC,MAAD,IAAoB;AACvD,QAAM,EAAEC,GAAF,EAAOC,KAAP,EAAcC,KAAd,KAAwBH,MAA9B;AACA,QAAM,EAAEI,EAAF,KAASH,GAAf;AACA,QAAMI,KAAK,GAAGD,EAAE,CAACD,KAAH,CAASA,KAAT,EAAgBG,MAAhB,EAAd;;AAEA;AACE,SAAOJ,KAAK,CAACK,KAAb,KAAuB,QAAvB,IAAmCL,KAAK,CAACK,KAAN,IAAe,IADpD;AAEE,sDAFF;;;AAKAC,EAAAA,MAAM,CAACC,IAAP,CAAYP,KAAK,CAACK,KAAlB,EAAyBG,OAAzB,CAAiCC,QAAQ,IAAI;AAC3C,gDAAmB;AACjBV,MAAAA,GADiB;AAEjBI,MAAAA,KAFiB;AAGjBF,MAAAA,KAHiB;AAIjBS,MAAAA,GAAG,EAAED,QAJY;AAKjBE,MAAAA,KAAK,EAAEX,KAAK,CAACK,KAAN,CAAYI,QAAZ,CALU,EAAnB;;AAOD,GARD;;AAUA,SAAO,EAAEN,KAAF,EAAP;AACD,CArBM,C","sourcesContent":["// @flow\n\nimport assert from 'assert';\nimport { type Context } from '../../Context.js';\nimport { whereClauseBuilder } from './whereClauseBuilder.js';\n\ntype Params = {|\n  ctx: Context,\n  input: Object,\n  table: string,\n|};\n\nexport const deleteMutationBuilder = (params: Params) => {\n  const { ctx, input, table } = params;\n  const { db } = ctx;\n  const query = db.table(table).delete();\n\n  assert(\n    typeof input.where === 'object' && input.where != null,\n    'input.where in delete mutation should be an object',\n  );\n\n  Object.keys(input.where).forEach(whereKey => {\n    whereClauseBuilder({\n      ctx,\n      query,\n      table,\n      key: whereKey,\n      value: input.where[whereKey],\n    });\n  });\n\n  return { query };\n};\n"]}